[
    {
      "type": {
        "organization": "ca.c3g.bento",
        "artifact": "service-registry",
        "language": "python"
      },
      "repository": "${BENTO_SERVICE_REGISTRY_REPO}@${BENTO_SERVICE_REGISTRY_TAG_OR_BRANCH}",
      "data_service": false,
      "wsgi": true,
      "python_module": "bento_service_registry.app",
      "python_callable": "application",
      "run_environment": {
        "CHORD_SERVICES": "/chord/chord_services.json",
        "URL_PATH_FORMAT": "api/{{artifact}}"
      }
    },
    {
      "type": {
        "organization": "ca.c3g.bento",
        "artifact": "drop-box",
        "language": "python"
      },
      "repository": "${BENTO_DROP_BOX_REPO}@${BENTO_DROP_BOX_TAG_OR_BRANCH}",
      "data_service": false,
      "wsgi": true,
      "python_module": "bento_drop_box_service.app",
      "python_callable": "application",
      "run_environment": {
        "MINIO_URL": "",
        "MINIO_USERNAME": "",
        "MINIO_PASSWORD": "",
        "MINIO_BUCKET": ""
      }
    },
    {
      "type": {
        "organization": "ca.c3g.bento",
        "artifact": "wes",
        "language": "python"
      },
      "repository": "${BENTO_WES_REPO}@${BENTO_WES_TAG}",
      "data_service": false,
      "apt_dependencies": ["openjdk-11-jre-headless"],
      "pre_install_commands": [
        "curl -Lso /chord/womtool.jar https://github.com/broadinstitute/cromwell/releases/download/52/womtool-52.jar"
      ],
      "pre_start_commands": [
        "nohup celery -A bento_wes.app worker &> {SERVICE_LOGS}/celery.log &"
      ],
      "post_stop_commands": [
        "pkill -9 -f 'bento_wes.app worker$'"
      ],
      "wsgi": true,
      "python_module": "bento_wes.app",
      "python_callable": "application",
      "run_environment": {
        "CHORD_SERVICES": "/chord/chord_services.json",
        "CELERY_RESULT_BACKEND":  "redis+socket://{REDIS_SOCKET}",
        "CELERY_BROKER_URL": "redis+socket://{REDIS_SOCKET}",
        "DATABASE":  "{SERVICE_DATA}/wes.db",
        "NGINX_INTERNAL_SOCKET": "/chord/tmp/nginx_internal.sock",
        "WOM_TOOL_LOCATION": "/chord/womtool.jar",
        "WRITE_OUTPUT_TO_DRS": "true",
        "DRS_DEDUPLICATE": "true",
        "DRS_SKIP_TYPES": "json"
      }
    },
    {
      "type": {
        "organization": "ca.c3g.bento",
        "artifact": "federation",
        "language": "python"
      },
      "repository": "${BENTO_FEDERATION_REPO}@${BENTO_FEDERATION_TAG}",
      "data_service": false,
      "wsgi": false,
      "service_runnable": "bento_federation_service",
      "run_environment": {
        "DATABASE": "{SERVICE_DATA}/federation.db",
        "INITIALIZE_IMMEDIATELY": "false"
      },
      "post_start_commands": [
        "curl --unix-socket /chord/tmp/nginx_internal.sock http://localhost{SERVICE_URL_BASE_PATH}/private/post-start-hook"
      ]
    },
    {
      "type": {
        "organization": "ca.c3g.bento",
        "artifact": "notification",
        "language": "python"
      },
      "repository": "${BENTO_NOTIFICATION_REPO}@${BENTO_NOTIFICATION_TAG}",
      "data_service": false,
      "pre_start_commands": [
        "flask db upgrade"
      ],
      "wsgi": true,
      "python_module": "bento_notification_service.app",
      "python_callable": "application",
      "run_environment": {
        "DATABASE": "{SERVICE_DATA}",
        "FLASK_APP": "bento_notification_service.app"
      }
    },
    {
      "type": {
        "organization": "ca.c3g.bento",
        "artifact": "event-relay",
        "language": "javascript"
      },
      "repository": "${BENTO_EVENT_RELAY_REPO}@${BENTO_EVENT_RELAY_TAG}",
      "data_service": false,
      "wsgi": false,
      "service_runnable": "bento-event-relay",
      "run_environment": {
        "SOCKET_IO_PATH": "/private/socket.io",
        "REDIS_CONNECTION": "{REDIS_SOCKET}",
        "REDIS_SUBSCRIBE_PATTERN": "chord.*",
        "JSON_MESSAGES": "true"
      }
    },
    {
      "type": {
        "organization": "ca.c3g.bento",
        "artifact": "metadata",
        "language": "python"
      },
      "repository": "${KATSU_REPO}@${KATSU_TAG}",
      "data_service": true,
      "manageable_tables": true,
      "pre_start_commands": [
        "django-admin migrate"
      ],
      "wsgi": true,
      "python_module": "chord_metadata_service.metadata.wsgi",
      "python_callable": "application",
      "run_environment": {
        "DJANGO_SETTINGS_MODULE": "chord_metadata_service.metadata.settings"
      }
    },
    {
      "type": {
        "organization": "ca.c3g.chord",
        "artifact": "drs",
        "language": "python"
      },
      "repository": "${BENTO_DRS_REPO}@${BENTO_DRS_TAG}",
      "data_service": false,
      "wsgi": true,
      "python_module": "bento_drs.app",
      "python_callable": "application",
      "run_environment": {
        "DATA": "{SERVICE_DATA}/drs_data",
        "DATABASE": "{SERVICE_DATA}",
        "FLASK_APP": "bento_drs.app"
      },
      "pre_start_commands": [
        "flask db upgrade"
      ]
    },
    {
      "type": {
        "organization": "ca.c3g.chord",
        "artifact": "log-service",
        "language": "python"
      },
      "repository": "${BENTO_LOGGING_REPO}@${BENTO_LOGGING_TAG}",
      "data_service": false,
      "wsgi": true,
      "python_module": "bento_log_service.app",
      "python_callable": "application",
      "run_environment": {
        "CHORD_SERVICES": "/chord/chord_services.json"
      }
    },
    {
      "type": {
        "organization": "ca.c3g.chord",
        "artifact": "gohan",
        "language": "go"
      },
      "repository": "${GOHAN_REPO}@${GOHAN_TAG}",
      "manageable_tables": true,
      "data_service": true
    }
  ]
  