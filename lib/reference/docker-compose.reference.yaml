services:
  reference:
    image: ${BENTO_REFERENCE_IMAGE}:${BENTO_REFERENCE_VERSION}
    container_name: ${BENTO_REFERENCE_CONTAINER_NAME}
    environment:
      - BENTO_UID
      - INTERNAL_PORT=${BENTO_REFERENCE_INTERNAL_PORT}
    networks:
      - reference-net
    expose:
      - ${BENTO_REFERENCE_INTERNAL_PORT}
    mem_limit: ${BENTO_REFERENCE_MEM_LIM}
    cpus: ${BENTO_REFERENCE_CPUS}
    healthcheck:
      test: [ "CMD", "curl", "http://localhost:${BENTO_REFERENCE_INTERNAL_PORT}/service-info" ]
      timeout: ${BENTOV2_HEALTHCHECK_TIMEOUT}
      interval: ${BENTOV2_HEALTHCHECK_INTERVAL}
    # TODO: volumes

networks:
  reference-net:
    external: true
    name: ${BENTO_REFERENCE_NETWORK}
